let chart;\n\nasync function updateDashboard() {\n  try {\n    // Stats\n    const statsRes = await fetch('/api/stats');\n    const stats = await statsRes.json();\n\n    const pnlEl = document.getElementById('pnl');\n    pnlEl.innerHTML = '$' + (stats.total_pnl || 0).toFixed(2);\n    pnlEl.style.color = (stats.total_pnl || 0) > 0 ? '#00FF88' : '#FF4444';\n\n    const winrateEl = document.getElementById('winrate');\n    winrateEl.innerHTML = (stats.winrate || 0).toFixed(1) + '%';\n    winrateEl.style.color = (stats.winrate || 0) > 50 ? '#00FF88' : '#FFAA00';\n\n    const lossesEl = document.getElementById('losses');\n    lossesEl.innerHTML = '$' + Math.abs(stats.total_losses || 0).toFixed(2);\n    lossesEl.style.color = '#FF4444';\n\n    document.getElementById('trades').innerHTML = stats.total_trades || 0;\n\n    // Monitor\n    const monRes = await fetch('/api/monitor');\n    const mon = await monRes.json();\n    document.getElementById('currentRsi').textContent = mon.current_rsi;\n    document.getElementById('currentPrice').textContent = mon.current_price;\n    const sigEl = document.getElementById('signal');\n    sigEl.textContent = mon.signal;\n    sigEl.style.color = mon.signal === 'BUY' ? '#00FF88' : mon.signal === 'SELL' ? '#FF4444' : '#FFD700';\n\n    // Health\n    const healthRes = await fetch('/api/health');\n    const health = await healthRes.json();\n    document.getElementById('health').innerHTML = `Status: ${health.status} (Uptime: ${Math.floor(health.uptime / 60).toFixed(0)}m)`;\n\n    // Trend\n    const trendRes = await fetch('/api/trend');\n    const trend = await trendRes.json();\n    const trendEl = document.getElementById('trend');\n    trendEl.innerHTML = `${trend.trend}<br><small>${trend.change}</small>';\n    trendEl.style.color = trend.trend === 'Bullish' ? '#00FF88' : '#FF4444';\n\n    // Sparkline\n    const sparkRes = await fetch('/api/sparkline');\n    const spark = await sparkRes.json();\n    const ctx = document.getElementById('sparkChart').getContext('2d');\n    if (chart) chart.destroy();\n    chart = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: spark.labels || [],\n        datasets: [{\n          data: spark.data || [],\n          borderColor: '#FFD700',\n          backgroundColor: 'rgba(255,215,0,0.1)',\n          tension: 0.4,\n          fill: true,\n          pointRadius: 0,\n          borderWidth: 2\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        scales: {\n          x: { display: false },\n          y: { display: false }\n        },\n        plugins: { legend: { display: false } }\n      }\n    });\n  } catch (e) {\n    console.error('Update error:', e);\n  }\n}\n\nupdateDashboard();\nsetInterval(updateDashboard, 30000);